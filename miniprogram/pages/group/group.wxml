<!--miniprogram/pages/group/group.wxml-->
<cu-custom bgColor="bg-gradual-pink" isCustom="{{true}}" isBack="{{true}}">
	<view slot="backText">返回</view>
	<view slot="content">美食圈子</view>
</cu-custom>
<scroll-view scroll-x class="bg-white nav">
	<view class="flex text-center">
		<view
		 class="cu-item flex-sub {{index==TabCur?'text-orange cur':''}}"
		 wx:for="{{tabList}}"
		 wx:key="index"
		 bindtap="tabSelect"
		 data-id="{{index}}"
		>
			{{item}}
		</view>
	</view>
</scroll-view>

<view class="cu-list menu-avatar">
	<view
	 wx:for="{{GroupsList}}"
	 wx:key="_id"
	 class="cu-item {{modalName=='move-box-'+ index?'move-cur':''}}"
	 bindtouchstart="ListTouchStart"
	 bindtouchmove="ListTouchMove"
	 bindtouchend="ListTouchEnd"
	 data-target="move-box-{{index}}"
	>
		<view bind:tap="toShowGroup" id="{{index}}" class="cu-avatar radius lg">
			<image
			 class="cu-avatar radius lg"
			 src="{{item.groupAvatarUrl}}"
			 mode="aspectFill"
			/>
		</view>
		<view class="content" bind:tap="toShowGroup" id="{{index}}">
			<view class="text-black">{{item.nickName}}</view>
				<view class="text-gray text-sm">
					<text class="cuIcon-locationfill text-orange" />
						{{item.secretKey}}
				</view>
		</view>
		<view class="action" bind:tap="toShowGroup" id="{{index}}">
			<view class="text-grey text-xs">{{item.membersList.length}}</view>
			<view class="cuIcon-favorfill text-yellow sm"> {{item.stores.length}}</view>
		</view>

		<view class="move">
		<!--
			<view class="bg-cyan light" id="{{index}}" bindtap="topItem">置顶</view>		
		-->
			<view class="bg-red light" id="{{index}}" bindtap="deleteItem">{{TabCur==0?'删除':'退出'}}</view>
		</view>
	</view>
</view>

<view class="createGroup">
	<van-button round color="linear-gradient(to right, #4bb0ff, #6149f6)" bind:click="toCreateGroup">{{TabCur==0?'创建圈子':'加入圈子'}}</van-button>
</view>

<block wx:if="{{isShowInputCode}}">
	<view class="input-box shadow">
		<input
		 class="inputCode"
		 value="{{shareCode}}"
		 placeholder="请输入秘钥"
		 bindinput="inputCode"
		/>
		<view class="button-box">
			<view class="left right" bindtap="cancel">取消</view>
			<view class="right" bindtap="confirmCode">确认</view>
		</view>
	</view>
</block>

